var host="http://localhost:3000",index_url=host+"/",welcome_url=host+"/welcome",search_url=host+"/search",volume_url=host+"/volume",saved_query="",start_index=0,max_results=10;function getQueryURL(){var e=document.querySelector("header > form > input[type=text]").value;console.log("Text Query: "+e),saved_query=e.split(" ").join("+"),console.log("URL Query Argument: "+saved_query);var t=search_url+"?q="+saved_query+"&startIndex="+start_index+"&maxResults="+max_results;return console.log("Full Query URL: "+t),t}function getContent(e){console.log("Sending HTTP POST Request to "+e+".");var t=new XMLHttpRequest;t.open("POST",e),t.responseType="text",t.onload=loadResponse(t),t.send()}function loadResponse(e){return function(){!function(e){document.querySelector("#content").innerHTML=e.response,window.scrollTo(0,0)}(e),document.querySelector("#prev")&&(document.querySelector("#prev").onclick=previousPage,document.querySelector("#prev").disabled=0===start_index),document.querySelector("#next")&&(document.querySelector("#next").onclick=nextPage,document.querySelector("#no-results")?document.querySelector("#next").disabled=!0:document.querySelector("#next").disabled=!1),function(){for(var e=document.querySelectorAll("#results > li > a"),t=0;t<e.length;t++)e[t].onclick=makeDetailQuery(e[t].id)}()}}function makeDetailQuery(e){return function(){getContent(volume_url+"/"+e)}}function searchQuery(){start_index=0,getContent(getQueryURL())}function currentPage(){getContent(search_url+"?q="+saved_query+"&startIndex="+start_index+"&maxResults="+max_results)}function nextPage(){getContent(search_url+"?q="+saved_query+"&startIndex="+(start_index+=max_results)+"&maxResults="+max_results)}function previousPage(){getContent(search_url+"?q="+saved_query+"&startIndex="+(start_index-=max_results)+"&maxResults="+max_results)}window.onload=function(){console.log("Loading Page. Setting Welcome Content and linking button onclick function.\n"),getContent(welcome_url),document.querySelector("header > button").onclick=searchQuery};